var projSourceSRID = new Proj4js.Proj("EPSG:2154");
var projSourceMapSRID = new Proj4js.Proj("EPSG:2154");
var projDestSRID = new Proj4js.Proj("EPSG:4326");

function addAutocomplete(field,selectCallback){
	$('#' + field).autocomplete({
		source : function(request, reponse){
			$.ajax({
				url : "${url}?q="+request.term+"&lat=${latitude}&lon=${longitude}&limit=${nb_results}",
			    success : function(data){
	                reponse($.map(data.features,function(elem){
	                	if(elem.properties.postcode.startsWith("93")) {
							return {
								//Autocompletion
								label: elem.properties.label,
								lng: elem.properties.x,
								lat: elem.properties.y,
								objectid: elem.properties.id
							}
						}
					}));
	        	}
	    	});
		},
		select: function (event, ui) {
		   //selection de l'adresse -> conversion des coordonn√©es avec le srid 2154
   		   if(null != selectCallback){
   		   		console.log(ui.item);
   		   		getPoiByObjectid(ui.item, selectCallback);
		   }
   	    },
   	   minLength: ${min_length},
   	   delay: ${delay}
	});
}

function getPoiByObjectid (item,selectCallback)
{
	selectCallback(item);
}
